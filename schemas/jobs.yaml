type: map
mapping:
  jobs:
    type: seq
    sequence:
      - type: map
        mapping:
          name:
            type: str
            required: true
          schedule:
            type: str
            required: false  # ni obvezno, če gre za ročno proženje
            pattern: '^\S+\s+\S+\s+\S+\s+\S+\s+\S+$'  # basic cron match
          plugin:
            type: str
            required: true
          params:
            type: map
            required: false
            allowempty: true
          retries:
            type: int
            required: false
            range:
              min: 0
              max: 10
          retry_delay:
            type: int
            required: false  # v sekundah
            range:
              min: 0
          notify:
            type: seq
            required: false
            sequence:
              - type: map
                mapping:
                  on:
                    type: seq
                    sequence:
                      - type: str
                        enum: ["success", "fail", "retry"]
                  method:
                    type: str
                    enum: ["email", "discord", "slack", "telegram"]
                  to:
                    type: str
                    required: false
                  channel:
                    type: str
                    required: false
          after_success:
            type: seq
            required: false
            sequence:
              - type: str
          if_previous_failed:
            type: seq
            required: false
            sequence:
              - type: str

